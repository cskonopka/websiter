<!DOCTYPE html>
<html lang="en">

<!-- <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>cskonopka</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://example.com/path-to/code-bold.css">
    <link href="https://fonts.cdnfonts.com/css/code" rel="stylesheet">
</head> -->

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>christopher konopka</title>
    <link rel="stylesheet" href="style.css" />
    <link href="https://fonts.cdnfonts.com/css/code" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body>
    <div class="container">
        <header>
            <h1 class="site-title">
                <a href="/" id="site-title">christopher konopka</a>
            </h1>
            <p class="info-links">
                <a href="bio.html">bio</a> ·
                <a href="artistcv.html">artist cv</a> ·
                <a href="workcv.html">work cv</a>
            </p>

            <div class="social-icons">
                <a href="https://github.com/cskonopka" target="_blank" aria-label="GitHub"><i class="fab fa-github"></i></a>
                <a href="https://youtube.com/cskonopka" target="_blank" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                <a href="https://linktr.ee/cskonopka" target="_blank" aria-label="Linktree">
                    <img src="images/lk.png" alt="Linktree" class="custom-icon" />
                </a>
                <a href="https://linkedin.com/in/christopherkonopka" target="_blank" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
                <a href="https://instagram.com/cskonopka" target="_blank" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
            </div>
            <nav>
                <button class="btn" data-filter="all">All</button>
                <button class="btn" data-filter="art">Art</button>
                <button class="btn" data-filter="code">Code</button>
            </nav>

        </header>


        <main>
            <div id="grid" class="grid"></div>
        </main>
    </div>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <script src="script.js"></script>
    <script>
  function createTagList(tagString) {
    return tagString
      .split('-')
      .filter(Boolean)
      .map(tag => `<span class="tag">${tag.trim()}</span>`)
      .join(' ');
  }

  function createBulletList(infoString) {
    return '<ul>' + infoString
      .split('\n')
      .filter(line => line.trim().startsWith('•') || line.trim().startsWith('-'))
      .map(line => `<li>${line.replace(/^[-•]\s*/, '').trim()}</li>`)
      .join('') + '</ul>';
  }

  Papa.parse('data/resume.csv', {
    download: true,
    header: true,
    complete: function(results) {
      const data = results.data;
      const container = document.getElementById('workcv');
      
      const grouped = {};

      // Group by company (job)
      data.forEach(row => {
        const company = row.job.trim();
        if (!grouped[company]) grouped[company] = [];
        grouped[company].push(row);
      });

      Object.keys(grouped).forEach(company => {
        const section = document.createElement('section');
        section.classList.add('cv-entry');
        section.innerHTML = `<h2>${company}</h2>`;

        grouped[company].forEach(row => {
          section.innerHTML += `
            <div class="role-entry">
              <h3>${row.role}</h3>
              <p><strong>Time:</strong> ${row.time}</p>
              <p><strong>Skills:</strong> ${createTagList(row.skills)}</p>
              <p><strong>Topics:</strong> ${createTagList(row.topics)}</p>
              <p><strong>Info:</strong> ${createBulletList(row.info)}</p>
            </div>`;
        });

        container.appendChild(section);
      });
    }
  });
</script>



</body>

</html>